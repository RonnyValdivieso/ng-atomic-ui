<div 
	class="file-upload"
	[class.file-upload--dragging]="isDragging()"
	[class.file-upload--disabled]="disabled()"
	[class.file-upload--error]="error()"
	[class.file-upload--circle]="variant() === 'circle'"
	(dragover)="onDragOver($event)"
	(dragleave)="onDragLeave($event)"
	(drop)="onDrop($event)">
	
	<input
		[id]="fileInputId()"
		type="file"
		class="file-upload__input"
		[accept]="accept()"
		[multiple]="multiple()"
		[disabled]="disabled()"
		(change)="onFileSelected($event)">

	<label [for]="fileInputId()" class="file-upload__label">
		<div class="file-upload__icon">
			<!-- Placeholder for an upload icon, using text for now or SVG if available in project -->
			<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M12 16L12 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
				<path d="M9 11L12 8L15 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
				<path d="M8 16H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
				<path d="M3 12C3 12 3 5 12 5C21 5 21 12 21 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
				<path d="M3 12C3 12 3 19 12 19C21 19 21 12 21 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
			</svg>
		</div>
		<span class="file-upload__text">
			@if (variant() === 'default') {
				<span class="file-upload__text--bold">Click to upload</span> or drag and drop
			}
		</span>
		@if (variant() === 'default') {
			<span class="file-upload__hint">
				{{ multiple() ? 'Multiple files allowed' : 'Single file' }} (Max {{ maxSizeMb() }}MB)
			</span>
		}
	</label>

	@if (error()) {
		<div class="file-upload__error-message">
			{{ error() }}
		</div>
	}

	@if (files().length > 0) {
		<ul class="file-upload__list">
			@for (file of files(); track file.name) {
				<li class="file-upload__item">
					<span class="file-upload__item-name">{{ file.name }}</span>
					<span class="file-upload__item-size">{{ (file.size / 1024 / 1024).toFixed(2) }} MB</span>
					<button 
						type="button" 
						class="file-upload__remove-btn"
						(click)="removeFile(file)"
						[disabled]="disabled()">
						Ã—
					</button>
				</li>
			}
		</ul>
	}
</div>
